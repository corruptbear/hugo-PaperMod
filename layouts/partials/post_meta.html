{{- $scratch := newScratch }}

{{- if not .Date.IsZero -}}
{{- $scratch.Add "meta" (slice (printf "<span title='%s'>%s</span>" (.Date) (.Date | time.Format (default "January 2, 2006" site.Params.DateFormat)))) }}
{{- end }}

{{- if (.Param "ShowReadingTime") -}}
{{- $scratch.Add "meta" (slice (i18n "read_time" .ReadingTime | default (printf "%d min" .ReadingTime))) }}
{{- end }}

{{- if (.Param "ShowWordCount") -}}
{{- $scratch.Add "meta" (slice (i18n "words" .WordCount | default (printf "%d words" .WordCount))) }}
{{- end }}

{{- with (partial "author.html" .) }}
{{- $scratch.Add "meta" (slice .) }}
{{- end }}



{{- $numberStr := partial "get-comment-number.html" . | safeHTML -}}
{{- $number := $numberStr | int -}}
    
{{- if $number -}}
  {{- $scratch.Add "meta" (printf "%d ðŸ’¬" $number) }}
{{- end -}}


<div id="comment-count-container"></div>
    <script>/*
    document.addEventListener("DOMContentLoaded", function() {
        // Create the comment-count element
        const commentElement = document.createElement('span');
        commentElement.id = 'comment-count';
        commentElement.className = 'comment-count';
        commentElement.innerText = 'Loading...'; // Default text while fetching data

        // Find the container where you want to insert the comment count
        const container = document.getElementById('comment-count-container');
        if (container) {
            // Append the new element to the specific container
            container.appendChild(commentElement);
        } else {
            console.error('Comment count container not found');
        }

        // Fetch the comment count when the DOM is fully loaded
        fetch('https://comments.blog.konomama.dev/count', {
            method: 'POST',
            body: JSON.stringify(["{{ .Page.RelPermalink }}"]), // Replace with actual permalink if not in Hugo template
            headers: {
                'Content-Type': 'application/json'
            }
        })
        .then(response => response.json())
        .then(data => {
            const commentCount = data[0];
            commentElement.innerText = `${commentCount} ðŸ’¬`;
        })
        .catch(error => {
            console.error('Error fetching comment count:', error);
        });
    });*/
</script>





{{- with ($scratch.Get "meta") }}
{{- delimit . "&nbsp;Â·&nbsp;" | safeHTML -}}
{{- end -}}
